(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[817],{3477:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/paid-queue",function(){return a(4907)}])},4907:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return o}});var n=a(5893),s=a(7294),i=a(1163),r=a(9603),l=a(9417),u=a(9337),c=a.n(u);function o(){let[e,t]=(0,s.useState)(""),[a,u]=(0,s.useState)(""),[o,d]=(0,s.useState)(1),[p,h]=(0,s.useState)(""),[_,m]=(0,s.useState)(!1),j=(0,i.useRouter)(),x=async n=>{if(n.preventDefault(),o<1){h("人数は1人以上でなければなりません。");return}h(""),m(!0);try{let n=await fetch("".concat("http://localhost:5000","/api/join"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:e,email:a,peopleCount:o})});if(n.ok)alert("Successfully joined the queue!"),t(""),u(""),d(1),j.push("/completed");else{let e=await n.json();h(e.error||"Failed to join the queue. Please try again.")}}catch(e){console.error("Error joining queue:",e),h("Failed to join the queue. Please try again.")}finally{m(!1)}};return(0,n.jsxs)("div",{className:c().container,children:[(0,n.jsx)("h1",{className:c().title,children:"Smash the WAIT!"}),(0,n.jsx)("h2",{className:c().title,children:"待ち時間をすっ飛ばせ!"}),(0,n.jsxs)("div",{className:c().ticketInfo,children:[(0,n.jsx)("h2",{children:"[特急券]"}),(0,n.jsxs)("p",{children:[(0,n.jsx)("strong",{children:"A1 5番目"})," | ",(0,n.jsx)("strong",{children:"500円/人"})]})]}),(0,n.jsxs)("form",{onSubmit:x,className:c().form,children:[(0,n.jsxs)("label",{className:c().labelWrapper,children:["NAME:",(0,n.jsx)("input",{type:"text",value:e,onChange:e=>t(e.target.value),placeholder:"例: 山田 太郎",required:!0,className:c().input})]}),(0,n.jsxs)("label",{className:c().labelWrapper,children:["PERSON:",(0,n.jsx)("input",{type:"number",value:o,onChange:e=>d(parseInt(e.target.value)),placeholder:"例: 3",required:!0,className:c().input,min:"1"})]}),(0,n.jsxs)("label",{className:c().labelWrapper,children:["MAIL:",(0,n.jsx)("input",{type:"email",value:a,onChange:e=>u(e.target.value),placeholder:"例: example@email.com",required:!0,className:c().input})]}),(0,n.jsx)("button",{type:"submit",className:c().submitButton,disabled:_,children:_?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.G,{icon:l.LM3,spin:!0})," 送信中..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(r.G,{icon:l.XCy})," 申し込む"]})})]}),p&&(0,n.jsx)("div",{className:c().error,children:p})]})}},9337:function(e){e.exports={container:"Paid-Queue_container__669Wk",title:"Paid-Queue_title__IMqE4",ticketInfo:"Paid-Queue_ticketInfo__6DXXN",labelWrapper:"Paid-Queue_labelWrapper__2aRVa",input:"Paid-Queue_input__y65L5",submitButton:"Paid-Queue_submitButton__bsOXx",error:"Paid-Queue_error__iCFu5"}}},function(e){e.O(0,[976,834,888,774,179],function(){return e(e.s=3477)}),_N_E=e.O()}]);